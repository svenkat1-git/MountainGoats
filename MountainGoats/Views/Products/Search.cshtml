@model MountainGoatsBikes.Models.ProductSearchViewModel

@{
    ViewData["Title"] = "Product Search";
}

<h2>Search for Products</h2>

<!-- The form posts back to the same action (POST /Products/Search) -->
<form method="post" asp-action="Search" class="mb-3">
    <div class="mb-2">
        <label>Pick a brand:</label>
        <select asp-for="BrandId" asp-items="Model.Brands" class="form-select">
            <option value="">-- Any Brand --</option>
        </select>
    </div>

    <div class="mb-2">
        <label>Pick a category:</label>
        <select asp-for="CategoryId" asp-items="Model.Categories" class="form-select">
            <option value="">-- Any Category --</option>
        </select>
    </div>

    <div class="mb-2">
        <label>Bike name:</label>
        <input type="text" asp-for="ProductName" class="form-control" />
    </div>

    <div class="mb-2">
        <label>Store zip:</label>
        <select asp-for="StoreZip" asp-items="Model.StoreZips" class="form-select">
            <option value="">-- Any Zip --</option>
        </select>
    </div>

    <button type="submit" class="btn btn-primary mt-2">Search</button>
</form>

<hr />

<!-- If the Results list has items, display them in a table -->
@if (Model.Results != null && Model.Results.Any())
{
<h3>Search Results</h3>
<table class="table table-bordered">
    <thead>
        <tr>
            <th>Product</th>
            <th>Brand</th>
            <th>Category</th>
            <th>List Price</th>
            <th>Store</th>
            <th>Store Zip</th>
            <th>Quantity</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model.Results)
            {
        <tr>
            <td>@item.ProductName</td>
            <td>@item.BrandName</td>
            <td>@item.CategoryName</td>
            <td>@item.ListPrice.ToString("C")</td>
            <td>@item.StoreName</td>
            <td>@item.StoreZip</td>
            <td>@(item.Quantity ?? 0)</td>
        </tr>
            }
    </tbody>
</table>
}
else
{
<p>No results found.</p>
}
