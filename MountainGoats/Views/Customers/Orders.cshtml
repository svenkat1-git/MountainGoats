@model MountainGoatsBikes.Models.OrdersViewModel

@{
    ViewData["Title"] = "Orders for " + Model.CustomerName;
}

<h2>Customer: @Model.CustomerName</h2>
<h3>Orders</h3>

<!-- If there's an error in ViewBag, show it -->
@if (ViewBag.ErrorMessage != null)
{
<div class="alert alert-danger">
    <strong>Error:</strong> @ViewBag.ErrorMessage
</div>
}
else if (Model.Orders == null || !Model.Orders.Any())
{
<p>No orders found for this customer.</p>
}
else
{
 <!-- Display each order with its items -->
@foreach (var order in Model.Orders)
    {
<div class="mt-3 mb-3">
    <div class="bg-light p-2">
        <strong>Order Number:</strong> @order.OrderId &nbsp;
        <strong>Date:</strong> @order.OrderDate.ToShortDateString() &nbsp;
        <strong>Order total:</strong> @order.OrderTotal.ToString("C")
    </div>
    <table class="table table-striped">
        <thead>
            <tr>
                <th>Item ID</th>
                <th>Item Name</th>
                <th>Quantity</th>
                <th>Unit Price</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in order.Items)
                    {
            <tr>
                <td>@item.ItemId</td>
                <td>@item.ProductName</td>
                <td>@item.Quantity</td>
                <td>@item.ListPrice.ToString("C")</td>
            </tr>
                    }
        </tbody>
    </table>
</div>
    }
}
